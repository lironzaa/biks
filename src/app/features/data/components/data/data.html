<app-data-table
  [config]="tableConfig()"
  [items]="filteredTrainees()"
  [isLoading]="isLoading()"
  [isPointer]="true"
  [idKey]="'gradeId'"
  [activeItemId]="selectedTraineesRow()?.gradeId"
  (tableRowClicked)="onTableRowClick($event)"
>
  <div class="filter-container">
    <app-select-input
      [options]="filterTypeOptions()"
      [label]="'Filter:'"
      [formControl]="filterTypeControl"
      [name]="'filterType'"
    />

    @switch (filterTypeControl.value) {
      @case ('id') {
        <app-text-input
          [label]="'ID'"
          [formControl]="dataFiltersForm.controls.id"
          [name]="'id'"
        />
      }
      @case ('name') {
        <app-text-input
          [label]="'Name'"
          [formControl]="dataFiltersForm.controls.name"
          [name]="'name'"
        />
      }
      @case ('dateRange') {
        <app-range-date-input
          [formGroup]="dataFiltersForm.controls.dateRange"
          [startDateControl]="dataFiltersForm.controls.dateRange.controls.startDate"
          [endDateControl]="dataFiltersForm.controls.dateRange.controls.endDate"
          [name]="'dateRange'"
        />
      }
      @case ('grade') {
        <app-number-input
          [label]="'Grade'"
          [formControl]="dataFiltersForm.controls.grade"
          [name]="'grade'"
        />
        <app-select-input
          [options]="gradeRangeOptions()"
          [label]="'Grade range'"
          [formControl]="dataFiltersForm.controls.gradeRange"
          [name]="'gradeRange'"
        />
      }
      @case ('subject') {
        <app-select-input
          [options]="subjectTypeOptions()"
          [label]="'Subject'"
          [formControl]="dataFiltersForm.controls.subject"
          [name]="'subject'"
        />
      }
    }
    <app-button
      [text]="'Clear Filters'"
      [variant]="'stroked'"
      [color]="'primary'"
      (buttonClicked)="clearFilters()"
    />
  </div>
</app-data-table>